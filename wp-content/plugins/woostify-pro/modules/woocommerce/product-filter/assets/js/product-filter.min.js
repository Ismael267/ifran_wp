"use strict";function ownKeys(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var woostifyFilterDatePicker=function(){var e=document.querySelector(".w-product-filter[data-type=date-range] .w-product-filter-inner");if(e){var t={mode:"dp-below"};"undefined"!=typeof woostify_datepicker_data&&(t.lang={},t.lang.months=woostify_datepicker_data.months,t.lang.days=woostify_datepicker_data.days,t.lang.today=woostify_datepicker_data.today,t.lang.clear=woostify_datepicker_data.clear,t.lang.close=woostify_datepicker_data.close);for(var r=e.querySelectorAll(".w-filter-date-picker"),o=0,i=r.length;o<i;o++)0,TinyDatePicker(r[o],t)}},woostifyToggleFilterHorizontal=function(){var e=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter .widget-title, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .widget-title"),r=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .w-product-filter");e.length&&e.forEach(function(t){t.onclick=function(){var e=t.parentNode;e.classList.contains("open")?e.classList.remove("open"):(r.forEach(function(e){e.classList.remove("open")}),e.classList.add("open"))}})},woostifyToggleFilter=function(){var e=document.querySelectorAll(".w-product-filter:not(.no-collapse) .widget-title");e.length&&e.forEach(function(o){var e=o.closest(".w-product-filter"),t=o,r=e.querySelector(".w-product-filter-inner"),i=e.getAttribute("data-collapse");e.style.transitionDuration="300ms",e.style.height=null===i?t.getBoundingClientRect().height+r.getBoundingClientRect().height+"px":t.getBoundingClientRect().height+"px",o.onclick=function(){var e,t=o.parentNode,r=t.querySelector(".w-product-filter-inner");null===t.getAttribute("data-collapse")?(t.classList.remove("is-opening"),t.classList.add("is-closing"),e=o.getBoundingClientRect().height,t.style.height=e+"px",setTimeout(function(){t.classList.contains("is-closing")&&t.setAttribute("data-collapse",""),t.classList.remove("is-closing")},300)):(t.classList.remove("is-closing"),t.classList.add("is-opening"),e=o.getBoundingClientRect().height,t.setAttribute("data-collapse",""),r=r.getBoundingClientRect().height,t.removeAttribute("data-collapse"),t.style.height=e+r+"px",setTimeout(function(){t.classList.remove("is-opening")},300))}})},woostifyToggleChildTerm=function(){var e=document.querySelectorAll('[data-type="checkbox"] .w-filter-item-depth');e.length&&(e.forEach(function(e){var t=e.previousElementSibling;t&&(e=e.classList.contains("visible")?woostify_product_filter.collapse_icon:woostify_product_filter.expand_icon,t.insertAdjacentHTML("beforeend",'<span class="expand-btn">'+e+"</span>"))}),(e=document.querySelectorAll('[data-type="checkbox"] .expand-btn')).length&&e.forEach(function(r){var e=r.closest(".w-filter-item-wrap");e&&(e.classList.add("is-parent-item"),r.onclick=function(){r.innerHTML=woostify_product_filter.expand_icon===r.innerHTML?woostify_product_filter.collapse_icon:woostify_product_filter.expand_icon;var e,t=r.closest(".w-filter-item-wrap");!t||(e=t.nextElementSibling)&&e.classList.contains("w-filter-item-depth")&&(e.classList.contains("visible")?e.classList.remove("visible"):e.classList.add("visible"),(t=r.closest(".w-product-filter ")).style.height="auto",e=t.getBoundingClientRect().height,t.style.height=e+"px")})}))},woostifyToggleSoftLimit=function(){var e=document.querySelectorAll(".w-product-filter .w-filter-toggle-btn");e.length&&e.forEach(function(r){r.onclick=function(){var e,t=r.parentNode.querySelector(".w-filter-item-overflow");t&&((e=r.parentNode.querySelector(".w-filter-toggle-btn.w-filter-hidden"))&&e.classList.remove("w-filter-hidden"),r.classList.add("w-filter-hidden"),t.classList.contains("w-filter-hidden")?t.classList.remove("w-filter-hidden"):t.classList.add("w-filter-hidden"),(e=r.closest(".w-product-filter ")).style.height="auto",t=e.getBoundingClientRect().height,e.style.height=t+"px")}})},woostifyUpdateFilters=function(e){for(var t in e)Array.isArray(e[t])&&!e[t].length&&delete e[t];return Object.keys(e).length?(1===Object.keys(e).length?void 0===e.first_active_filter?e.first_active_filter=Object.keys(e)[0]:delete e.first_active_filter:void 0!==(r=e.first_active_filter)&&void 0===e[r]&&delete e.first_active_filter,e):{};var r},woostifyBuildQueryString=function(e){for(var t=woostify_product_filter.filters_url,r=Object.keys(e),o={},i=0,n=r.length;i<n;i++)void 0!==t[r[i]]&&(o[t[r[i]]]=e[r[i]]);return o},woostifyFilterQuickSearch=function(){var e=document.querySelectorAll(".w-filter-quick-search");e.length&&e.forEach(function(i){var e,n=i.parentNode.querySelectorAll(".w-filter-item-wrap");n.length&&((e=function(){for(var e=0,t=n.length;e<t;e++){var r,o=n[e].querySelector(".w-filter-item-name");o&&(r=i.value.toUpperCase(),o.innerText.toUpperCase().includes(r)?n[e].style.display="":n[e].style.display="none")}})(),i.addEventListener("input",e))})},mergeTooltips=function(y,g,w){var h=y.noUiSlider.getTooltips();h.forEach(function(e){e.style.transition="none"}),y.noUiSlider.on("update",function(e,t,r,o,i){var n=y.querySelector(".noUi-base .mergeTooltip");n||((n=document.createElement("div")).setAttribute("class","noUi-tooltip mergeTooltip"),n.style.visibility="hidden",y.querySelector(".noUi-base").appendChild(n));var l=[[]],c=[[]],a=[[]],d=0;h[0]&&(l[0][0]=0,c[0][0]=i[0],a[0][0]=e[0]);for(var s=1,u=i.length;s<u;s++){var f=h[s].getBoundingClientRect(),p=h[s-1].getBoundingClientRect();(!h[s]||p.right-f.left+g<0)&&(l[++d]=[],a[d]=[],c[d]=[]),h[s]&&(l[d].push(s),a[d].push(e[s]),c[d].push(i[s]))}l.length<=1?(l.forEach(function(e,t){var r=(c[t][0]+c[t][1])/2,t=a[t].filter(function(e,t,r){return r.indexOf(e)===t});n.innerHTML=t.join(w),n.style.visibility="visible",n.style.transform="translate(-50%, -44%)",n.style.left=r+"%",n.style.transition="none"}),h.forEach(function(e){e.style.visibility="hidden"})):(n.style.visibility="hidden",h.forEach(function(e){e.style.visibility="visible"}))})},woostifyAjaxFilter=function(){var a,o,u,i,l,f,n,d,c,p,y,g,w,h,m,v,b,e=document.querySelectorAll(".w-product-filter[data-type]"),s=document.querySelector(".w-result-filter");e.length&&s&&(a=document.querySelector(".w-filter-key"),s.querySelector(".products"),e=document.getElementById("wpadminbar"),o=e?e.offsetHeight:0,u=Array.isArray(woostify_product_filter.active_params)?{}:woostify_product_filter.active_params,i={},l=1,f=new CustomEvent("filtered",{detail:!0}),a&&woostify_product_filter.remove_key&&(a.innerHTML=woostify_product_filter.remove_key),(n=function(){var n=s.querySelectorAll(".woocommerce-pagination .page-numbers a.page-numbers");if(n.length)for(var e=0,t=n.length;e<t;e++)!function(i){n[i].onclick=function(e){e.preventDefault();var t=s.querySelector(".woocommerce-pagination .page-numbers .page-numbers.current"),r=n[i].classList.contains("prev"),o=n[i].classList.contains("next"),e=1;r&&t&&(e=Number(t.innerText)-1),o&&t&&(e=Number(t.innerText)+1),r||o||(e=Number(n[i].innerText)),l=e,document.body.dispatchEvent(new CustomEvent("filtered",{detail:!1}))}}(e)})(),(d=function(j,O){var e=document.querySelectorAll(".w-product-filter[data-type]");e.length&&e.forEach(function(L){var E=L.getAttribute("data-type"),T=L.getAttribute("data-id"),x="tmp_"+T;window[x]||(window[x]=void 0===j[T]?[]:j[T]),i[T]=E;var e=function(){switch(E){case"search":var r=L.querySelector(".w-product-filter-text-field"),t=L.querySelector(".w-product-filter-search-icon");if(!r||!t)return{v:void 0};r.onkeyup=function(e){13===e.keyCode&&t.click()},t.onclick=function(){var e=r.value.trim(),t=r.getAttribute("data-value")||"";e&&t!=e&&(r.setAttribute("data-value",e),j[T]=e,document.body.dispatchEvent(O))};break;case"date-range":var o=L.querySelector("[data-from]"),i=L.querySelector("[data-to]"),e=L.querySelector(".w-filter-item-submit");if(!o||!i||!e)return{v:void 0};e.onclick=function(){var e;o.value&&i.value&&((e=[])[0]=o.value,e[1]=i.value,j[T]=e,document.body.dispatchEvent(O))};break;case"rating":var n=L.querySelectorAll(".w-filter-rating-item");if(!n.length)return{v:void 0};for(var l=0,c=n.length;l<c;l++)!function(t){n[t].onclick=function(){var e;n[t].classList.contains("selected")||((e=L.querySelector(".w-filter-rating-item.selected"))&&e.classList.remove("selected"),n[t].classList.add("selected"),j[T]=5-t,document.body.dispatchEvent(O))}}(l);break;case"sort-order":var a=L.querySelector(".w-product-filter-select-field.w-filter-ordering");if(!a)return{v:void 0};a.onchange=function(e){e.preventDefault(),j[T]=a.value,document.body.dispatchEvent(O)};break;case"select":var d=L.querySelector(".w-product-filter-select-field");if(!d)return{v:void 0};d.onchange=function(){j[T]=d.value,document.body.dispatchEvent(O)};break;case"radio":var s=L.querySelectorAll('[type="radio"]');if(!s.length)return{v:void 0};for(var u=0,f=s.length;u<f;u++)!function(e){s[e].onchange=function(){j[T]=s[e].parentNode.getAttribute("data-id"),document.body.dispatchEvent(O)}}(u);break;case"range-slider":if(!L)break;var p=L.querySelector(".w-filter-range-slider");if(!p||"object"===_typeof(L.noUiSlider)||p.classList.contains("noUi-target"))break;var y=L.querySelector(".w-filter-range-slider-reset"),g=JSON.parse(p.getAttribute("data-start")),e=JSON.parse(p.getAttribute("data-range")),w=noUiSlider.create(p,{tooltips:!0,connect:!0,start:g,step:1,range:e,format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}});w.on("change",function(e,t,r,o,i,n){j["range-slider"]=n.options.range,j[T]=e,document.body.dispatchEvent(O)}),y&&(y.onclick=function(){var e,t=y.previousElementSibling;!t||(e=t.querySelector(".noUi-handle-upper"))&&(t=Number(e.getAttribute("aria-valuemin")||0),e=Number(e.getAttribute("aria-valuemax")||0),w.set([t,e]),delete j[T],document.body.dispatchEvent(O))}),mergeTooltips(p,2," - ");break;case"check-range":var h=L.querySelectorAll('[type="checkbox"]');if(!h.length)return{v:void 0};for(var m=0,v=h.length;m<v;m++)!function(e){h[e].onclick=function(){var t=h[e].parentNode.getAttribute("data-value");window[x].includes(t)?window[x]=window[x].filter(function(e){return e!==t}):window[x].push(t),j[T]=window[x],document.body.dispatchEvent(O)}}(m);break;case"checkbox":var b=L.querySelectorAll('[type="checkbox"]');if(!b.length)return{v:void 0};for(var S=0,_=b.length;S<_;S++)!function(e){b[e].onclick=function(){var t=Number(b[e].parentNode.getAttribute("data-id"));window[x].includes(t)?window[x]=window[x].filter(function(e){return e!==t}):window[x].push(t),j[T]=window[x],document.body.dispatchEvent(O)}}(S);break;case"visual":var k=L.querySelectorAll(".w-filter-item");if(!k.length)return{v:void 0};for(var q=0,A=k.length;q<A;q++)!function(e){k[e].onclick=function(){var t=Number(k[e].getAttribute("data-id"));window[x].includes(t)?(window[x]=window[x].filter(function(e){return e!==t}),k[e].classList.remove("selected")):(window[x].push(t),k[e].classList.add("selected")),j[T]=window[x],document.body.dispatchEvent(O)}}(q)}}();if("object"===_typeof(e))return e.v})})(u,f),(c=function(){var s=a?a.querySelectorAll(".w-filter-key-remove"):[];if(s.length)for(var e=0,t=s.length;e<t;e++)!function(d){s[d].onclick=function(){var e=s[d].getAttribute("data-id"),t=s[d].getAttribute("data-type"),r=s[d].getAttribute("data-value");if(t){switch(t){case"all":for(var o=Object.getOwnPropertyNames(u),i=0,n=o.length;i<n;i++)delete u[o[i]];var l=s[d].parentNode.querySelectorAll("[data-id]");l.length&&l.forEach(function(e){e=e.getAttribute("data-id");window["tmp_"+e]&&(window["tmp_"+e]=[])}),v(),p(),y(),g(),w(),h(),m(),b();break;case"sort-order":b(),delete u[e];break;case"search":y(),delete u[e];break;case"date-range":w(),delete u[e];break;case"check-range":if(!r)return;l=window["tmp_"+e];void 0!==l&&(c=l.filter(function(e){return e!==r}),window["tmp_"+e]=c,u[e]=c,(c=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-value="'+r+'"] [type="checkbox"]:checked'))&&(c.checked=!1));break;case"range-slider":g(),delete u[e];break;case"rating":h(),delete u[e];break;case"select":var c=document.querySelector('.w-product-filter[data-id="'+e+'"] .w-product-filter-select-field');c&&(c.value=""),delete u[e];case"radio":var a=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-id="'+r+'"] [type="radio"]:checked');a&&(a.checked=!1),delete u[e];break;case"checkbox":case"visual":if(!r)return;a=window["tmp_"+e];void 0!==a&&(a=a.filter(function(e){return e!==Number(r)}),window["tmp_"+e]=a,u[e]=a,(a=document.querySelector('.w-product-filter[data-id="'+e+'"] [data-id="'+r+'"] [type="checkbox"]:checked'))&&(a.checked=!1))}document.body.dispatchEvent(f)}}}(e)})(),p=function(){var e=document.querySelectorAll(".w-product-filter-select-field");e.length&&e.forEach(function(e){e.value=""})},y=function(){var e=document.querySelectorAll(".w-product-filter-text-field");e.length&&e.forEach(function(e){e.value=""})},g=function(){var e=document.querySelectorAll(".w-product-filter-type-range-slider");e.length&&e.forEach(function(e){"object"===_typeof(e.noUiSlider)&&e.noUiSlider.set(e.noUiSlider.options.start)})},w=function(){var e=document.querySelectorAll(".w-filter-date-picker");e.length&&e.forEach(function(e){e.value=""})},h=function(){var e=document.querySelector(".w-product-filter-type-rating .selected");e&&e.classList.remove("selected")},m=function(){var e=document.querySelectorAll('.w-product-filter-inner [type="checkbox"]:checked, .w-product-filter-inner [type="radio"]:checked');e.length&&e.forEach(function(e){e.checked=!1})},v=function(){var e=document.querySelectorAll(".w-filter-item.selected");e.length&&e.forEach(function(e){e.classList.remove("selected")})},b=function(){var e=document.querySelectorAll(".w-filter-ordering");e.length&&(e.value="")},document.body.addEventListener("filtered",function(e){var t=document.body.getBoundingClientRect().top,r=s.getBoundingClientRect().top;r<o&&window.scrollTo({top:-1*t- -1*r-o,behavior:"smooth"});r=document.querySelector("ul.products");r&&!r.querySelector(".filter-loading")&&r.insertAdjacentHTML("beforeend",'<span class="filter-loading"></span>'),e.detail&&(l=1),document.body.classList.add("filter-updating");r=woostifyBuildQueryString(woostifyUpdateFilters(u)),e=Object.fromEntries(new URLSearchParams(location.search)),r=_objectSpread(_objectSpread({},e),r),r=new URLSearchParams(r).toString();history.pushState&&history.pushState(null,null,r?"?"+r:window.location.pathname);e={action:"woostify_product_filter",ajax_nonce:woostify_product_filter.ajax_nonce,per_page:s.getAttribute("data-posts")||"",paged:l,term_id:woostify_product_filter.term_id,taxonomy:woostify_product_filter.taxonomy,list_filter:JSON.stringify(i),search_param:e.s||"",data:JSON.stringify(woostifyUpdateFilters(u))},e=new URLSearchParams(e).toString(),e=new Request(woostify_product_filter.ajax_url,{method:"POST",body:e,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(e).then(function(e){if(200!==e.status)throw console.log("Status Code: "+e.status),e;return e.json()}).then(function(e){if(e.success){var t=e.data,r=s.querySelector(".woostify-sorting .woocommerce-result-count"),o=s.querySelector(".products"),e=s.querySelector(".woocommerce-pagination");document.querySelector(".shop-widget");if(r&&t.result_count&&(r.innerHTML=t.result_count),o&&(o.innerHTML=t.content),e&&(t.pagination?e.innerHTML=t.pagination:e.innerHTML=""),a&&(a.innerHTML=t.filtered),t.template)for(var i in t.template){var n=t.template[i],l=n.id,c=n.type,i=(new DOMParser).parseFromString(n.template,"text/html").querySelector(".w-product-filter"),l=document.querySelector('.w-product-filter[data-type="'+c+'"][data-id="'+l+'"]');n.template?l&&i&&(l.innerHTML=i.innerHTML,d(u,f)):l.innerHTML=""}woostifyToggleFilter(),woostifyToggleFilterHorizontal(),woostifyToggleChildTerm(),woostifyToggleSoftLimit(),woostifyFilterQuickSearch()}}).catch(function(e){console.log(e)}).finally(function(){document.body.classList.remove("filter-updating"),c(),n(),"function"==typeof woostifyInfiniteScroll&&woostifyInfiniteScroll(!1),"function"==typeof woostifyQuickView&&woostifyQuickView(),woostifyFilterDatePicker()})}))},woostifyFilterOrdering=function(){var t,e=document.querySelector("form.woocommerce-ordering"),r=!!e&&e.querySelector("select.orderby"),o=document.querySelector("select.w-filter-ordering");r&&o&&(t=new CustomEvent("change"),r.addEventListener("change",function(e){e.preventDefault(),o.value=r.value,o.dispatchEvent(t)}),jQuery(".woocommerce-ordering").on("submit",function(e){e.preventDefault()}))};document.addEventListener("DOMContentLoaded",function(){woostifyAjaxFilter(),woostifyFilterDatePicker(),woostifyToggleFilter(),woostifyToggleFilterHorizontal(),woostifyToggleChildTerm(),woostifyToggleSoftLimit(),woostifyFilterQuickSearch(),woostifyFilterOrdering(),window.addEventListener("click",function(t){var e=document.querySelectorAll(".filter-area.filter-horizontal .w-product-filter, .w-pro-smart-filter-layout-horizontal .elementor-widget-container .w-product-filter");if(!e.length||e.length<1)return!1;e.forEach(function(e){e.contains(t.target)||e.classList.remove("open")})}),"function"==typeof onElementorLoaded&&onElementorLoaded(function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-date-range.default",function(){woostifyFilterDatePicker()}),window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-range-slider.default",function(){var e=document.querySelectorAll(".w-product-filter-type-range-slider");e.length&&e.forEach(function(e){var t,r;"object"!==_typeof(e.noUiSlider)&&(t=Number(e.getAttribute("data-from"))||0,r=Number(e.getAttribute("data-to"))||100,noUiSlider.create(e,{tooltips:!0,connect:!0,start:[t,r],step:1,range:{min:t,max:r},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}}))})})})});